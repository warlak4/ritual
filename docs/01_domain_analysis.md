# Анализ предметной области

## Основные участники
- **Клиенты** — родственники и доверенные лица, которые оформляют заявки и оплачивают услуги.
- **Ритуальные агенты** — сотрудники компании, координирующие процесс и взаимодействующие с клиентами.
- **Гости** — пользователи без авторизации или с минимальными правами, наблюдающие сервисную информацию и расписание.

## Ключевые сущности
- **Заявка**: содержит данные клиента, умершего, выбранного пакета услуг, дополнительных услуг, статуса и стоимости.
- **Церемония**: дата и время, место, назначенный персонал, ресурсы (транспорт, инвентарь).
- **Пакет услуг** и **Справочник услуг**: типовые наборы и отдельные услуги с ценами, условиями и SLA.
- **Персонал и подрядчики**: агенты, водители, музыканты, поставщики, каждый с графиком и контактами.
- **Ресурсы**: транспорт, инвентарь, залы прощания, кладбища/крематории.
- **Документы**: договоры, счета, акты, сертификаты.
- **Платежи**: предоплаты, окончательные расчёты, статусы оплат, методы платежа.
- **Аналитика**: загрузка персонала, популярность услуг, средний чек, география церемоний.

## Основные процессы
1. Приём обращения: регистрация клиента, умершего, первичный контакт.
2. Подбор пакета и допуслуг: расчёт стоимости, согласование.
3. Заключение договора, формирование графика и документов.
4. Подготовка церемонии: бронь ресурсов, назначение персонала, уведомления.
5. Проведение церемонии: контроль выполнения, фиксация фактов и расходов.
6. Послесервис: установка памятников, уход за захоронениями, обратная связь.
7. Биллинг и финансовая отчётность.
8. Мониторинг качества, безопасность данных, резервное копирование.

## Требования к безопасности
- Обязательное шифрование паспортных данных, адресов и контактной информации.
- Хранение паролей с использованием bcrypt.
- Ролевая модель (admin, client, guest) с минимально необходимым доступом.
- Аудит значимых операций: что изменено, кем, до/после, IP/устройство.
- Защита API: rate limiting, CSRF для UI, валидация входных данных, защита от SQL-инъекций.

## Нефункциональные требования
- Node.js backend, SQL Server (SSMS) в Docker, SPA frontend с i18n (RU/EN).
- Адаптивный интерфейс (≥3 брейкпоинта), кастомный брендбук.
- Импорт/экспорт CSV и SQL дампы.
- Аналитика и визуализации с фильтрами и экспортом.
- Полный комплект тестов: функциональные, интеграционные, нагрузочные, безопасность, отказоустойчивость.

